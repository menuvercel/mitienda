// Importar el componente PromocionesManager al inicio del archivo
import PromocionesManager from '@/components/PromocionesManager';
import { Percent } from 'lucide-react'; // Importar el icono Percent para la pestaña de Promociones

// Añadir el estado para la pestaña de promociones
const [activeTiendaTab, setActiveTiendaTab] = useState('secciones');

// Reemplazar la sección de tienda existente con esta versión actualizada
{activeSection === 'tienda' && (
  <div>
    <div className="flex justify-between items-center mb-6">
      <h2 className="text-2xl font-bold flex items-center">
        <Store className="mr-2 h-6 w-6" />
        Gestión de Tienda
      </h2>
    </div>

    {/* Pestañas - Añadimos la nueva pestaña de Promociones */}
    <div className="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit">
      <Button
        variant={activeTiendaTab === 'secciones' ? "default" : "ghost"}
        onClick={() => setActiveTiendaTab('secciones')}
        className="flex items-center"
      >
        <LayoutGrid className="mr-2 h-4 w-4" />
        Secciones
      </Button>
      <Button
        variant={activeTiendaTab === 'destacados' ? "default" : "ghost"}
        onClick={() => setActiveTiendaTab('destacados')}
        className="flex items-center"
      >
        <Star className="mr-2 h-4 w-4" />
        Destacados
      </Button>
      <Button
        variant={activeTiendaTab === 'promociones' ? "default" : "ghost"}
        onClick={() => setActiveTiendaTab('promociones')}
        className="flex items-center"
      >
        <Percent className="mr-2 h-4 w-4" />
        Promociones
      </Button>
    </div>

    {/* Contenido de Secciones */}
    {activeTiendaTab === 'secciones' && (
      <div>
        <div className="flex justify-end mb-4">
          <Button
            onClick={handleCreateSeccion}
            className="bg-blue-500 hover:bg-blue-600 text-white"
          >
            <Plus className="mr-2 h-4 w-4" />
            Nueva Sección
          </Button>
        </div>

        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          {secciones.map((seccion) => (
            <SeccionCard
              key={seccion.id}
              seccion={seccion}
              onEdit={handleEditSeccion}
              onDelete={handleDeleteSeccion}
              onClick={handleSeccionClick}
            />
          ))}
        </div>

        {secciones.length === 0 && (
          <div className="text-center py-12">
            <Store className="mx-auto h-12 w-12 text-gray-400 mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">
              No hay secciones creadas
            </h3>
            <p className="text-gray-500 mb-4">
              Comienza creando tu primera sección para organizar tus productos
            </p>
            <Button onClick={handleCreateSeccion}>
              <Plus className="mr-2 h-4 w-4" />
              Crear Primera Sección
            </Button>
          </div>
        )}
      </div>
    )}

    {/* Contenido de Productos Destacados */}
    {activeTiendaTab === 'destacados' && (
      <div>
        <div className="flex justify-end mb-4">
          <Button
            onClick={handleManageProductosDestacados}
            className="bg-yellow-500 hover:bg-yellow-600 text-white"
          >
            <Settings className="mr-2 h-4 w-4" />
            Gestionar Destacados
          </Button>
        </div>

        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          {productosDestacados.map((producto) => (
            <ProductoDestacadoCard
              key={producto.id}
              producto={producto}
              onClick={(producto) => setSelectedProduct(producto)}
            />
          ))}
        </div>
        {productosDestacados.length === 0 && (
          <div className="text-center py-12">
            <Star className="mx-auto h-12 w-12 text-gray-400 mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">
              No hay productos destacados
            </h3>
            <p className="text-gray-500 mb-4">
              Selecciona productos para destacar en tu tienda y aumentar las ventas
            </p>
            <Button onClick={handleManageProductosDestacados} className="bg-yellow-500 hover:bg-yellow-600">
              <Star className="mr-2 h-4 w-4" />
              Seleccionar Productos Destacados
            </Button>
          </div>
        )}
      </div>
    )}

    {/* Contenido de Promociones - NUEVA SECCIÓN */}
    {activeTiendaTab === 'promociones' && (
      <PromocionesManager />
    )}
  </div>
)}